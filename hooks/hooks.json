{
  "description": "SRE latency monitoring hooks â€” tracks ALL tool calls for time-spent analysis (pure bash, no Python)",
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "LOCK=/tmp/sre-latency-session.lock; if [ -f \"$LOCK\" ] && [ \"$(cat $LOCK 2>/dev/null)\" = \"$(date -u +%Y-%m-%dT%H:%M)\" ]; then echo '{\"additionalContext\":\"SRE Latency Monitor active.\"}'; exit 0; fi; date -u +%Y-%m-%dT%H:%M > \"$LOCK\"; rm -f /tmp/sre-latency-tool-start-* 2>/dev/null; mv /tmp/sre-latency-monitor.jsonl /tmp/sre-latency-monitor.prev.jsonl 2>/dev/null; echo '{\"event\":\"session_start\",\"timestamp\":\"'$(date -u +%Y-%m-%dT%H:%M:%SZ)'\"}' > /tmp/sre-latency-monitor.jsonl 2>/dev/null; echo '{\"additionalContext\":\"SRE Latency Monitor active. Use /sre-latency:benchmark or /sre-latency:tool-timings.\"}'",
            "statusMessage": "Initializing SRE Latency Monitor"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "TID=$(jq -r '.tool_use_id // \"unknown\"'); perl -MTime::HiRes=time -e 'printf \"%.6f\", time()' > \"/tmp/sre-latency-tool-start-$TID\" 2>/dev/null; echo '{}'"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/log_tool_latency.sh",
            "async": true
          }
        ]
      }
    ]
  }
}
